// src/setupTests.ts
/* eslint-disable import/no-extraneous-dependencies */
import '@testing-library/jest-dom';

// Silence noisy act() deprecation logs (keep what you already had)
const originalError = console.error;
console.error = (...args: any[]) => {
  if (/Warning: ReactDOMTestUtils\.act is deprecated/.test(args[0])) return;
  originalError.call(console, ...args);
};

// --- ADD THESE MOCKS ---

// Mock the ESM package so it doesn't pull crypto-js
jest.mock('qf/react-library', () => ({
  useAppGlobalState: () => ({ getToken: () => 'test-token' }),
  useConfig: () => ({ apiBaseUrl: 'http://localhost' }),
}));

// Mock your API service hook (adjust the relative path to match your project)
jest.mock('../services/useApiService', () => ({
  __esModule: true,
  default: () => ({ makeRequest: jest.fn() }), // you can override per test if needed
}));

// Optional: some components call window.scrollTo
// @ts-ignore
if (!window.scrollTo) window.scrollTo = () => {};
