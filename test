jest.mock('./FormContext', () => {
  const React = require('react');

  // Get the actual implementation so we can keep the real initialFormData
  const actual = jest.requireActual('./FormContext');

  let ctxValueRef: any = null;
  const Context = React.createContext<any>(null);

  return {
    __esModule: true,
    FormContext: Context,
    useFormContext: () => {
      const v = React.useContext(Context);
      if (!v) throw new Error('useFormContext used outside Provider in test');
      ctxValueRef = v;
      return v;
    },
    initialFormData: actual.initialFormData, // use real data from actual module
  };
});
